// prisma/schema.prisma

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           String   @id @default(cuid())
  email        String   @unique
  name         String?
  passwordHash String
  createdAt    DateTime @default(now())
  roles		   UserRole[]
}

model Role {
	id			String	@id @default(cuid())
	name		String  @unique
	users		UserRole[]
}

model UserRole {
	userId		String
	roleId		String
	User		User @relation(fields: [userId], references: [id])
	role		Role @relation(fields: [roleId], references: [id])

	@@id([userId, roleId])
}

model File {
	id			String	@id @default(cuid())
	filename	String
	url			String
	uploadedBy	String
	createdAt	DateTime @default(now())
}

model AnalyticsEvent {
	id			String	@id @default(cuid())
	userId		String
	action		String
	metadata	Json?
	createdAt	DateTime @default(now())
}

